import{u as N,r as c,j as e,L as m}from"./index-D0Dq44PN.js";import{a as o,s as w}from"./supabase-Dp-5A4AM.js";import{C as x}from"./ClientLayout-GIrzllZr.js";import{P as n,C as y}from"./package-CkTH6tZV.js";import{A as C,T as k}from"./truck-B1chvFsO.js";import{C as h}from"./check-circle-CWLdd7YR.js";import"./x-CndneHfz.js";import"./scan-line-egmCNSat.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=o("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=o("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=o("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);function I(){N();const[r,u]=c.useState([]),[p,b]=c.useState(!0),[s,i]=c.useState("all");c.useEffect(()=>{g()},[]);const g=async()=>{try{const{data:t}=await w.from("exchanges").select("*").order("created_at",{ascending:!1});u(t||[])}catch(t){console.error("Error fetching exchanges:",t)}finally{b(!1)}},f=t=>{switch(t){case"pending":return{color:"bg-amber-50 text-amber-700 border-amber-200",icon:y,label:"En attente de validation",description:"Le marchand examine votre demande"};case"validated":return{color:"bg-blue-50 text-blue-700 border-blue-200",icon:h,label:"Validé",description:"Votre échange est approuvé"};case"preparing":return{color:"bg-purple-50 text-purple-700 border-purple-200",icon:n,label:"En préparation",description:"Le nouveau produit est en cours de préparation"};case"in_transit":return{color:"bg-indigo-50 text-indigo-700 border-indigo-200",icon:k,label:"En transit",description:"Le colis est en route"};case"completed":return{color:"bg-emerald-50 text-emerald-700 border-emerald-200",icon:h,label:"Terminé",description:"Échange complété avec succès"};case"rejected":return{color:"bg-red-50 text-red-700 border-red-200",icon:T,label:"Refusé",description:"Le marchand a refusé la demande"};default:return{color:"bg-slate-50 text-slate-700 border-slate-200",icon:C,label:t,description:""}}},j=r.filter(t=>s==="all"?!0:s==="active"?!["completed","rejected"].includes(t.status):s==="completed"?t.status==="completed":!0),a={total:r.length,active:r.filter(t=>!["completed","rejected"].includes(t.status)).length,completed:r.filter(t=>t.status==="completed").length};return p?e.jsx(x,{children:e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600"})})}):e.jsx(x,{children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Mes Échanges"}),e.jsx("p",{className:"text-slate-600",children:"Suivez vos demandes d'échange en temps réel"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4",children:[e.jsx("div",{className:"text-sm text-slate-600 mb-1",children:"Total"}),e.jsx("div",{className:"text-2xl font-bold text-slate-900",children:a.total})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4",children:[e.jsx("div",{className:"text-sm text-slate-600 mb-1",children:"En cours"}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:a.active})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4",children:[e.jsx("div",{className:"text-sm text-slate-600 mb-1",children:"Terminés"}),e.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:a.completed})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"w-4 h-4 text-slate-500"}),e.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Filtrer:"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>i("all"),className:`px-3 py-1 text-sm rounded-lg transition-colors ${s==="all"?"bg-emerald-100 text-emerald-700 font-medium":"text-slate-600 hover:bg-slate-100"}`,children:["Tous (",a.total,")"]}),e.jsxs("button",{onClick:()=>i("active"),className:`px-3 py-1 text-sm rounded-lg transition-colors ${s==="active"?"bg-emerald-100 text-emerald-700 font-medium":"text-slate-600 hover:bg-slate-100"}`,children:["En cours (",a.active,")"]}),e.jsxs("button",{onClick:()=>i("completed"),className:`px-3 py-1 text-sm rounded-lg transition-colors ${s==="completed"?"bg-emerald-100 text-emerald-700 font-medium":"text-slate-600 hover:bg-slate-100"}`,children:["Terminés (",a.completed,")"]})]})]})}),r.length===0?e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(n,{className:"w-8 h-8 text-slate-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Aucun échange"}),e.jsx("p",{className:"text-slate-600 mb-6",children:"Vous n'avez pas encore créé de demande d'échange"}),e.jsxs(m,{to:"/client/scan",className:"inline-flex items-center px-6 py-3 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors font-medium",children:[e.jsx(n,{className:"w-5 h-5 mr-2"}),"Créer un échange"]})]}):e.jsx("div",{className:"space-y-3",children:j.map(t=>{const l=f(t.status),v=l.icon,d=Math.floor((Date.now()-new Date(t.created_at).getTime())/(1e3*60*60*24));return e.jsx(m,{to:`/client/tracking/${t.exchange_code}`,className:"block bg-white rounded-xl shadow-sm border border-slate-200 hover:shadow-md hover:border-emerald-200 transition-all p-5 group",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:`p-2 rounded-lg border ${l.color}`,children:e.jsx(v,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-semibold text-slate-900 text-lg",children:t.exchange_code}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium border ${l.color}`,children:l.label})]}),e.jsx("p",{className:"text-sm text-slate-600",children:l.description})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pl-14",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500 mb-0.5",children:"Motif"}),e.jsx("div",{className:"text-sm font-medium text-slate-900 truncate",children:t.reason})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500 mb-0.5",children:"Date"}),e.jsx("div",{className:"text-sm font-medium text-slate-900",children:d===0?"Aujourd'hui":d===1?"Hier":`Il y a ${d} jours`})]})]})]}),e.jsx(E,{className:"w-5 h-5 text-slate-400 group-hover:text-emerald-600 transition-colors flex-shrink-0 mt-2"})]})},t.id)})})]})})}export{I as default};
